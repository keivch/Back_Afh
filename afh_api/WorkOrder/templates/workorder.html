<!DOCTYPE html>

<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Orden de trabajo {{ code }}</title>
  <style>
    @page {
      size: A4;
      margin: 20mm;
    }

    /* Rectángulo en el área superior izquierda */
    @page {
      @top-left-corner {
        content: "";
        display: block;
        width: 6mm;
        height: 25mm;
        background: #99E63C;
        border-radius: 2px;
      }
    }

    body {
      font-family: Arial, sans-serif;
      font-size: 15px;
      color: #000;
      margin: 20px;
      position: relative;
      padding-bottom: 100px;
      /* Espacio para el footer */
    }

    /* Imagen de fondo con opacidad */
    body::before {
      content: "";
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 300px;
      height: 300px;
      background-image: url("https://res.cloudinary.com/dp4tvthea/image/upload/v1756313054/afhlogoazul_rxcpcv.png");
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      opacity: 0.08;
      z-index: -1;
      pointer-events: none;
    }

    .header,
    .datos-cotizacion,
    .opcion,
    .condiciones,
    .firma,
    .datos-orden,
    .personal-info,
    .permisos-section {
      position: relative;
      z-index: 1;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 30px;
    }

    .logo {
      height: 70px;
    }

    .titulo {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    h1,
    h2,
    h3 {
      margin: 0;
    }

    .datos-cotizacion,
    .condiciones,
    .firma,
    .datos-orden,
    .personal-info,
    .permisos-section {
      margin-top: 30px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      background-color: rgba(255, 255, 255, 0.9);
    }

    th,
    td {
      border: 1px solid #000;
      padding: 6px;
      text-align: left;
    }

    th {
      background-color: #f2f2f2;
    }

    .total {
      font-weight: bold;
      text-align: right;
    }

    ol.tareas {
      margin-top: 10px;
      padding-left: 20px;
    }

    .firma {
      margin-top: 50px;
    }

    .tabla-cotizacion {
      width: 100%;
      border-collapse: collapse;
      border: 1px solid black;
    }

    .tabla-cotizacion td {
      border: 1px solid black;
      padding: 8px;
      vertical-align: middle;
    }

    .logo {
      text-align: center;
      width: 20%;
    }

    .logo img {
      width: 80px;
      margin-bottom: 5px;
    }

    .estado-vigente {
      color: green;
      font-weight: bold;
    }

    .titulo {
      text-align: center;
      font-weight: bold;
    }

    .version {
      text-align: center;
    }

    .datos-superior,
    .datos-inferior {
      width: 30%;
      font-size: 14px;
    }

    .table-cotizacion {
      margin-bottom: 20px;
    }

    .footer {
      bottom: 0;
      right: 0;
      font-size: 12px;
      color: #000;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 8px 12px;
      text-align: right;
      z-index: 999;
      border: none;
      box-shadow: none;
      opacity: 0.6;
    }

    /* Nuevos estilos para la información de la orden */
    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    .info-box {
      border: 1px solid #ddd;
      padding: 15px;
      background-color: rgba(255, 255, 255, 0.9);
      border-radius: 5px;
    }

    .info-box h4 {
      margin-top: 0;
      margin-bottom: 10px;
      color: #333;
      border-bottom: 2px solid #f2f2f2;
      padding-bottom: 5px;
    }

    .info-item {
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
    }

    .info-label {
      font-weight: bold;
      color: #555;
    }

    .info-value {
      color: #000;
    }

    .highlight {
      background-color: #fff3cd;
      padding: 2px 5px;
      border-radius: 3px;
    }

    .emergency {
      background-color: #f8d7da;
      color: #721c24;
    }

    .programmed {
      background-color: #d4edda;
      color: #155724;
    }

    .permisos-list {
      background-color: #f8f9fa;
      padding: 10px;
      border-radius: 5px;
      margin-top: 10px;
    }

    .permisos-list ul {
      margin: 0;
      padding-left: 20px;
    }

    .permisos-list li {
      margin-bottom: 5px;
    }
  </style>
</head>

<body>
  <div class="decorativo-rectangulo"></div>
  <div class="table-cotizacion">
    <table class="tabla-cotizacion">
      <tr>
        <td rowspan="2" class="logo">
          <img src={{logo_url}} alt="Logo de la empresa" />
          <div class="estado-vigente">DOCUMENTO VIGENTE</div>
        </td>
        <td class="titulo" colspan="1">Ordenes de trabajo</td>
        <td class="datos-superior">
          <strong>Código:</strong> F-GC-05<br />
          <strong>Fecha de Creación:</strong> 19-07-2022
        </td>
      </tr>
      <tr>
        <td class="version">RV-{{revision}}</td>
        <td class="datos-inferior">
          <strong>Fecha de Revisión:</strong> 19-07-2022 <br />
        </td>
      </tr>
    </table>
  </div>

  <div class="header">
    <div class="titulo">ORDEN N.º {{ code }} - {{revision}}</div>
  </div>

  <div>
    Palmira, {{ fecha }}
    <br /><br />
    Señores:<br />
    {{ customer }}<br />
    Agradecemos de antemano su amable invitación para llevar a cabo el siguiente trabajo:<br />
    <strong>"{{ descripcion }}"</strong>
  </div>

  <!-- Nueva sección: Información de la Orden de Trabajo -->
  <div class="datos-orden">
    <h3>INFORMACIÓN DE LA ORDEN DE TRABAJO</h3>
    <div class="info-grid">
      <div class="info-box">
        <h4>Cronograma y Tipo de Trabajo</h4>
        <div class="info-item">
          <span class="info-label">Fecha de Inicio:</span>
          <span class="info-value highlight">{{ start_date }}</span>
        </div>
        {% if end_date %}
        <div class="info-item">
          <span class="info-label">Fecha de Finalización:</span>
          <span class="info-value highlight">{{ end_date }}</span>
        </div>
        {% endif %}
        <div class="info-item">
          <span class="info-label">Tipo de Actividad:</span>
          <span class="info-value {% if activity == 1 %}emergency{% else %}programmed{% endif %}">
            {% if activity == 1 %}🚨 EMERGENCIA{% elif activity == 2 %}📅 PROGRAMADO{% else %}No definido{% endif %}
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">Lugar de Trabajo:</span>
          <span class="info-value">
            {% if workplace == 1 %}🏢 Instalaciones Propias{% elif workplace == 2 %}🏭 Instalaciones del Cliente{% else
            %}No definido{% endif %}
          </span>
        </div>
      </div>

      <div class="info-box">
        <h4>Personal Asignado</h4>
        {% if number_technicians %}
        <div class="info-item">
          <span class="info-label">Técnicos:</span>
          <span class="info-value">{{ number_technicians }} persona(s)</span>
        </div>
        {% endif %}
        {% if number_officers %}
        <div class="info-item">
          <span class="info-label">Oficiales:</span>
          <span class="info-value">{{ number_officers }} persona(s)</span>
        </div>
        {% endif %}
        {% if number_auxiliaries %}
        <div class="info-item">
          <span class="info-label">Auxiliares:</span>
          <span class="info-value">{{ number_auxiliaries }} persona(s)</span>
        </div>
        {% endif %}
        {% if number_supervisors %}
        <div class="info-item">
          <span class="info-label">Supervisores:</span>
          <span class="info-value">{{ number_supervisors }} persona(s)</span>
        </div>
        {% endif %}
        {% if number_technicians or number_officers or number_auxiliaries %}
        <div class="info-item" style="border-top: 1px solid #ddd; padding-top: 8px; margin-top: 8px;">
          <span class="info-label">Total Personal:</span>
          <span class="info-value highlight">
            {% if number_technicians %}{{ number_technicians }} Técnico(s){% endif %}
            {% if number_officers %}{{ number_officers }} Oficial(es){% endif %}
            {% if number_auxiliaries %}{{ number_auxiliaries }} Auxiliar(es){% endif %}
            {% if number_supervisors %}{{ number_supervisors }} Supervisor(es){% endif %}
          </span>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Sección de Permisos y Autorizaciones -->
  {% if permissions %}
  <div class="permisos-section">
    <h3>PERMISOS Y AUTORIZACIONES REQUERIDAS</h3>
    <div class="permisos-list">
      <ul>
        {% for permiso in permissions %}
        <li>{{ permiso }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  <div class="datos-cotizacion">

    {% if description %}
    <p><strong>Descripción Detallada:</strong></p>
    <p style="background-color: #f8f9fa; padding: 10px; border-left: 4px solid #007bff; margin: 10px 0;">
      {{ description }}
    </p>
    {% endif %}

    <h3>ACTIVIDADES</h3>

    <ol class="tareas">
      {% for task in tasks %}
      <li>{{ task }}</li>
      {% endfor %}
    </ol>
  </div>

  <div class="firma">
    <p>Atentamente,</p>
    <br /><br />
    <strong>ANDRES FELIPE HERNANDEZ</strong><br />
    Gerente General
  </div>

  <footer class="footer">
    <p>
      Carrera 13A # 40 - 37 B/Primero de Mayo, Palmira - Colombia<br />
      Cel (+57) 311 616 7972 | Fijo (602) 287 2362<br />
      afh@afhmetalmecanico.com<br />
      www.afhmetalmecanico.com
    </p>
  </footer>
</body>

</html>